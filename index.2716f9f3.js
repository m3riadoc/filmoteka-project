function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=globalThis,n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var a=i.register;a("ifJdc",function(t,n){e(t.exports,"register",()=>o,e=>o=e);var o,i=new Map;o=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})}}),a("5PtdM",function(e,t){let n=document.querySelector(".queue-button");function o(e){a(e)?n.textContent="Remove from Queue":n.textContent="Add to Queue"}function i(){let e=sessionStorage.getItem("currentMovie");return e?JSON.parse(e):null}function a(e){return(JSON.parse(localStorage.getItem("queue"))||[]).some(t=>t.id===e.id)}function r(e){let t=document.createElement("div");t.classList.add("notification"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}window.addEventListener("load",()=>{let e=i();e&&o(e)}),n.addEventListener("click",()=>{let e,t;let n=i();n&&(a(n)?(e=(JSON.parse(localStorage.getItem("queue"))||[]).filter(e=>e.id!==n.id),localStorage.setItem("queue",JSON.stringify(e)),window.location.href.includes("index.html")||location.reload(),r("Movie removed from queue.")):(JSON.parse(localStorage.getItem("watched"))||[]).some(e=>e.id===n.id)?r("Movie already in watched list. Cannot add to queue."):((t=JSON.parse(localStorage.getItem("queue"))||[]).push(n),localStorage.setItem("queue",JSON.stringify(t)),r("Movie added to queue.")),o(n))})}),a("3xRUa",function(e,t){let n=document.querySelector(".watched-button");function o(e){a(e)?n.textContent="Remove from Watched":n.textContent="Add to Watched"}function i(){let e=sessionStorage.getItem("currentMovie");return e?JSON.parse(e):null}function a(e){return(JSON.parse(localStorage.getItem("watched"))||[]).some(t=>t.id===e.id)}function r(e){let t=document.createElement("div");t.classList.add("notification"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}window.addEventListener("load",()=>{let e=i();e&&a(e)&&o(e)}),n.addEventListener("click",()=>{let e,t;let n=i();n&&(a(n)?(e=(JSON.parse(localStorage.getItem("watched"))||[]).filter(e=>e.id!==n.id),localStorage.setItem("watched",JSON.stringify(e)),window.location.href.includes("index.html")||location.reload(),r("Movie removed from watched list.")):(JSON.parse(localStorage.getItem("queue"))||[]).some(e=>e.id===n.id)?r("Movie already in queue. Cannot add to watched."):((t=JSON.parse(localStorage.getItem("watched"))||[]).push(n),localStorage.setItem("watched",JSON.stringify(t)),r("Movie added to watched list.")),o(n))})}),a("g1uI7",function(t,n){e(t.exports,"getMovieDetails",()=>c);var o=i("PP2np");let a="ddd78f0e80e0d30735adfd081ca2dc47",r=`https://api.themoviedb.org/3/movie/popular?api_key=${a}`,l=document.querySelector(".loader"),s=document.querySelector("footer"),d="";async function c(e){let t=`https://api.themoviedb.org/3/movie/${e}?api_key=${a}&language=en-US`;try{let e=await fetch(t);return await e.json()}catch(e){return null}}async function u(e=1){let t=`${r}&page=${e}`;l.classList.remove("hidden"),s.classList.add("hidden");try{await new Promise(e=>setTimeout(e,500));let e=await fetch(t),n=await e.json(),o=n.results,i=await Promise.all(o.map(async e=>{let t=await c(e.id);return{...e,...t}}));return l.classList.add("hidden"),s.classList.remove("hidden"),{movies:i,totalPages:n.total_pages}}catch(e){return{movies:[],totalPages:0}}}function m(e){let t=document.querySelector(".film-list");t.innerHTML="";let n=e.map(e=>(function(e){let t=document.createElement("div");t.classList.add("movie-item"),t.style.cursor="pointer",t.setAttribute("data-modal",""),t.setAttribute("data-id",e.id);let n=document.createElement("img");e.poster_path?(n.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,n.alt=e.title):(n.src=o&&o.__esModule?o.default:o,n.alt="no image"),t.appendChild(n);let i=document.createElement("div");i.classList.add("content-wrapper");let a=document.createElement("h2");a.textContent=e.title,t.appendChild(a);let r=e.genres.map(e=>"Science Fiction"===e.name?"Sci-Fi":e.name),l="";l=r.length>2?`${r.slice(0,2).join(", ")}, Other`:r.join(", ");let s=document.createElement("p");s.textContent=l,i.appendChild(s);let d=document.createElement("p"),c=new Date(e.release_date).getFullYear();d.textContent=`| ${c}`,d.classList.add("movie-year"),i.appendChild(d),t.appendChild(i);let u=document.createElement("p"),m=e.vote_average.toFixed(1);return u.textContent=`${m}`,t.appendChild(u),i.appendChild(u),u.classList.add("main-rating"),t})(e));t.append(...n)}function p(){window.scrollTo({top:0,behavior:"smooth"})}async function h(e){if(d){let{movies:t,totalPages:n}=await w(d,e);m(t),g(n,e),p()}else if("/my-library.html"===window.location.pathname)m([]),p();else{let{movies:t,totalPages:n}=await u(e);m(t),g(n,e),p()}}async function v(){(window.location.pathname.includes("/index.html")||"/"===window.location.pathname||"https://kpiskorz27.github.io/goit-js-gp-filmoteka/"===window.location.href)&&h(1)}function g(e,t){let n=document.querySelector(".pagination");if(n.innerHTML="",window.innerWidth<768){let o=t>2?t-2:1,i=Math.min(o+4,e);e<=5?i=e:t>e-2&&(o=e-4,i=e);let a=document.createElement("button");a.innerHTML=`
      <svg class="icon icon-arrow-left" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M25.333 16H6.666M16 25.333 6.667 16 16 6.667" style="stroke:var(--color2, #000)"/>
      </svg>
    `,a.style.cursor="pointer",a.classList.add("page-button","first-button"),t>1&&a.addEventListener("click",()=>{h(t-1),y(!1)}),n.appendChild(a);for(let e=o;e<=i;e++){let o=document.createElement("button");o.textContent=e,o.style.cursor="pointer",o.classList.add("page-button"),e===t&&o.classList.add("active"),o.addEventListener("click",()=>{h(e),y(!1)}),n.appendChild(o)}if(i<e){let o=document.createElement("button");o.innerHTML=`
        <svg class="icon icon-arrow-right" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M6.667 16h18.667M16 25.333l9.333-9.333-9.333-9.333" style="stroke:var(--color2, #000)"/>
        </svg>
      `,o.classList.add("page-button","last-button"),o.style.cursor="pointer",o.addEventListener("click",()=>{h(Math.min(t+1,e)),y(!1)}),n.appendChild(o)}}else{let o=1,i=Math.min(5,e);e>5&&(i=(o=Math.max(t-Math.floor(2.5),1))+5-1)>=1e3&&(o=Math.max((i=1e3)-5+1,1));let a=document.createElement("button");if(a.innerHTML=`
    <svg class="icon icon-arrow-left" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M25.333 16H6.666M16 25.333 6.667 16 16 6.667" style="stroke:var(--color2, #000)"/>
    </svg>
`,a.style.cursor="pointer",a.classList.add("page-button","first-button"),t>1&&a.addEventListener("click",()=>{h(t-1),y(!1)}),n.appendChild(a),o>1){let e=document.createElement("button");if(e.textContent=1,e.style.cursor="pointer",e.classList.add("page-button"),e.addEventListener("click",()=>{h(1),y(!1)}),n.appendChild(e),o>2){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),n.appendChild(e)}}for(let e=o;e<=i;e++){let o=document.createElement("button");o.textContent=e,o.style.cursor="pointer",o.classList.add("page-button"),e===t&&o.classList.add("active"),o.addEventListener("click",()=>{h(e),y(!1)}),n.appendChild(o)}if(i<e){if(i<e-1){let e=document.createElement("span");e.textContent="...",e.classList.add("ellipsis-span"),n.appendChild(e)}let t=Math.min(i+15,e),o=document.createElement("button");o.style.cursor="pointer",o.textContent=t,o.classList.add("page-button"),o.addEventListener("click",()=>{h(t)}),n.appendChild(o)}let r=document.createElement("button");r.innerHTML=`
      <svg class="icon icon-arrow-right" viewBox="0 0 32 32" width="18" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.667" d="M6.667 16h18.667M16 25.333l9.333-9.333-9.333-9.333" style="stroke:var(--color2, #000)"/>
      </svg>
  `,r.classList.add("page-button","last-button"),r.style.cursor="pointer",r.addEventListener("click",()=>{h(Math.min(t+1,e)),y(!1)}),n.appendChild(r)}}window.addEventListener("load",v);let f=document.querySelector(".film-container");async function w(e,t=1){let n=`https://api.themoviedb.org/3/search/movie?api_key=${a}&query=${encodeURIComponent(e)}&page=${t}`;try{f.classList.add("hidden"),s.classList.add("hidden"),l.classList.remove("hidden");let e=await fetch(n),t=await e.json(),o=t.results,i=await Promise.all(o.map(async e=>{let t=await c(e.id);return{...e,...t}}));return setTimeout(()=>{l.classList.add("hidden")},250),setTimeout(()=>{f.classList.remove("hidden"),s.classList.remove("hidden")},300),{movies:i,totalPages:t.total_pages}}catch(e){return{movies:[],totalPages:0}}}function y(e){let t=document.getElementById("error-message");e?t.style.opacity="1":t.style.opacity="0"}async function S(e,t=1){if(d=e,""===e.trim())await h(t);else{let{movies:n,totalPages:o}=await w(e,t);0===n.length?(y(!0),d="",document.querySelector(".search-input").value=""):(y(!1),m(n),g(o,t))}}let L=document.querySelector(".search-form");L&&L.addEventListener("submit",function(e){e.preventDefault(),S(document.querySelector(".search-input").value,1)})}),a("PP2np",function(e,t){e.exports=new URL("no-poster-available.c6ce9600.jpg",import.meta.url).toString()}),a("8sx2c",function(e,t){var n=i("g1uI7");let o=document.querySelector(".movie-modal"),a=document.querySelector(".movie-backdrop"),r=document.querySelector(".modal-close-btn"),l=document.querySelector(".movie-image"),s=document.querySelector(".loader_modal_container"),d=document.querySelector(".queue-button"),c=document.querySelector(".watched-button");async function u(e){e.preventDefault(),setTimeout(()=>{a.classList.remove("is-hidden"),o.classList.remove("is-hidden"),s.classList.remove("hidden")},100),r.addEventListener("click",m)}function m(e){e.preventDefault(),a.classList.add("is-hidden"),o.classList.add("is-hidden"),document.removeEventListener("keydown",p),a.removeEventListener("click",m),r.removeEventListener("click",m)}function p(e){"Escape"===e.code&&m(e)}document.addEventListener("click",function(e){e.target.classList.contains("movie-backdrop")&&m(e)}),window.addEventListener("keydown",p),function e(){let t=document.querySelectorAll(".film-list");t.length?t.forEach(e=>{e.addEventListener("click",function(e){let t=e.target.closest(".movie-item");if(t){let i=t.dataset.id,a=t.querySelector("img").getAttribute("src");l.setAttribute("src",a),(0,n.getMovieDetails)(i).then(t=>{(JSON.parse(localStorage.getItem("queue"))||[]).some(e=>e.id===t.id)?d.textContent="Remove from Queue":d.textContent="Add to Queue",(JSON.parse(localStorage.getItem("watched"))||[]).some(e=>e.id===t.id)?c.textContent="Remove from Watched":c.textContent="Add to Watched",sessionStorage.setItem("currentMovie",JSON.stringify(t)),function(e){let t=o.querySelector(".movie-title");o.querySelector(".average-rate");let n=o.querySelector(".total-vote"),i=o.querySelector(".movie-popularity"),a=o.querySelector(".movie-original-title"),r=o.querySelector(".movie-genre"),l=o.querySelector(".movie-about-par"),s=e.genres.map(e=>e.name).join(", ");r.textContent=s,t.textContent=e.title,n.innerHTML=`<span class="movie-average-rate">${e.vote_average.toFixed(1)}</span> / <span class="movie-votes">${e.vote_count}</span>`,i.textContent=e.popularity,a.textContent=e.original_title,r.textContent=s,l.textContent=e.overview}(t),u(e),setTimeout(()=>{s.classList.add("hidden")},500)})}})}):setTimeout(e,1e3)}()}),i("ifJdc").register(new URL("",import.meta.url).toString(),JSON.parse('["9zqhd","index.2716f9f3.js","2NfRA","no-poster-available.c6ce9600.jpg"]'));
//# sourceMappingURL=index.2716f9f3.js.map
